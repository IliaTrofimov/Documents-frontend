<loading [status]="!this.field"></loading>

<div class="row" *ngIf="this.field">
    <div class="col-10">
        <input (blur)="save()" [(ngModel)]="field.Name" [readonly]="readonly" class="form-control form-control-sm" placeholder="Название поля"/>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <select [(ngModel)]="field.DataType" (change)="save()" [disabled]="readonly" class="form-control form-control-sm">
                    <option *ngFor="let d of dataTypes" [ngValue]="d">{{d | fieldtype}}</option>
                </select>
            </div>
            <div class="input-group-prepend">
                <select [(ngModel)]="field.RestrictionType" (change)="onSave.emit()" [disabled]="readonly" class="form-control form-control-sm">
                    <option *ngFor="let r of restrictionTypes" [ngValue]="r">{{r | restriction}}</option>
                </select>
            </div>
            <input [(ngModel)]="field.Restriction" (blur)="save()" [readonly]="readonly || field.RestrictionType == 0" class="form-control form-control-sm" placeholder="Ограничение"/>
        </div>
    </div>
    <div class="col">
        <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" *ngIf="!readonly">
            Действия
        </button>
        <div class="dropdown-menu">
            <button class="dropdown-item btn-sm" (click)="changeOrder(-1)">Двигать вверх</button>
            <button class="dropdown-item btn-sm" (click)="changeOrder(1)">Двигать вниз</button>
            <button class="dropdown-item btn-sm" (click)="save()">Сохранить</button>
            <button class="dropdown-item btn-sm" (click)="delete()">Удалить</button>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" [(ngModel)]="field.Required" [disabled]="readonly" (change)="save()">
            <label class="form-check-label">
                Обязательное
            </label>
        </div>
    </div>
</div>
